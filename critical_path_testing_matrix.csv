Pipeline,Test ID,Action,Description,Module,UI Location,Dependencies,Failure Impact,Test Command
Shift Journey Pipeline,sj-001,Receive care home email,Resend webhook receives email at instayfs.co.uk,functions/careHomeInboundEmail,N/A (Backend),"Resend webhook, Email parsing",No shift requests received - system dead,Send test email to dominion@instayfs.co.uk
Shift Journey Pipeline,sj-002,AI parses email,"InvokeLLM extracts date, time, role, location",functions/careHomeInboundEmail (AI section),N/A (Backend),"OpenAI API, InvokeLLM integration",Cannot create shifts automatically,Check AI confidence score output
Shift Journey Pipeline,sj-003,Create shift record,Shift entity created with correct data,entities/Shift,Shifts page,"Database, Shift entity schema",No shifts in system - total failure,Go to Shifts page → verify new shift exists
Shift Journey Pipeline,sj-004,Assign staff to shift,"Admin assigns staff → status changes to assigned""""",pages/Shifts (assignStaffMutation),Shifts page → Assign Staff button,"Shift update, Booking creation",Cannot fill shifts - ops failure,Assign staff and check booking_id populated
Shift Journey Pipeline,sj-005,Send shift assignment notification,Email/SMS/WhatsApp sent to staff,components/notifications/NotificationService,N/A (Background),"Resend API, Twilio API, NotificationQueue",Staff not notified - manual follow-up needed,Check staff email/phone for notification
Shift Journey Pipeline,sj-006,Create draft timesheet,Timesheet auto-created when shift confirmed,functions/autoTimesheetCreator,Timesheets page,"Timesheet entity, Shift confirmation",No timesheets → no invoicing → no payment,Confirm shift → verify timesheet created
Shift Journey Pipeline,sj-007,Send 24h reminder,Shift reminder sent 24h before start,functions/shiftReminderEngine,N/A (Cron job),"Cron trigger, SMS/WhatsApp/Email",Staff may forget shift → no-shows,Check reminder_24h_sent flag on shift
Shift Journey Pipeline,sj-008,Send 2h reminder,Final reminder sent 2h before shift,functions/shiftReminderEngine,N/A (Cron job),"Cron trigger, SMS/WhatsApp",Increased no-show risk,Check reminder_2h_sent flag on shift
Shift Journey Pipeline,sj-009,GPS clock-in,Staff clocks in with GPS validation,components/staff/MobileClockIn,Staff Portal → Clock In,"GPS consent, Geofence validation",No proof of attendance - disputes,Clock in and verify geofence_validated = true
Shift Journey Pipeline,sj-010,Upload timesheet document,Staff uploads signed timesheet photo,pages/Timesheets (upload),Staff Portal → Timesheets → Upload Doc,"UploadFile integration, File storage",Cannot process timesheets → no invoicing,Upload photo and verify uploaded_documents array
Shift Journey Pipeline,sj-011,AI OCR extraction,"Extract hours, signatures, dates from document",functions/extractTimesheetData,N/A (Background),"InvokeLLM with file_urls, AI vision",Manual entry required - admin overhead,Check extracted data vs actual timesheet
Shift Journey Pipeline,sj-012,Auto-approve timesheet,High-confidence timesheets auto-approved,functions/autoTimesheetApprovalEngine,Timesheets page (status: approved),"AI confidence scoring, Validation rules",All timesheets need manual review,Run auto-approval and verify status change
Shift Journey Pipeline,sj-013,Mark shift completed,Admin closes shift with actual hours,pages/Shifts (ShiftCompletionModal),Shifts page → Complete Shift,"Timesheet approval, Shift update",Shifts stuck in limbo - no invoicing,Complete shift and verify status = completed
Shift Journey Pipeline,sj-014,Generate invoice,Invoice created from approved timesheets,pages/GenerateInvoices,Generate Invoices page,"Approved timesheets, Invoice entity",No invoicing → no revenue,Generate invoice and verify line items
Shift Journey Pipeline,sj-015,Send invoice to client,Email invoice PDF to client billing email,pages/Invoices (sendInvoiceMutation),Invoices page → Send button,"SendEmail integration, PDF generation",Client never receives invoice - no payment,Send invoice and check client email
Shift Journey Pipeline,sj-016,Payment reminder,Reminder sent if invoice overdue,functions/paymentReminderEngine,N/A (Cron job),"Cron trigger, Email",Slower payment collection,Check overdue invoice for reminder_sent_count
Automation Pipeline,auto-001,Daily shift closure engine,Verify shifts >24h old without timesheets,functions/dailyShiftClosureEngine,N/A (Cron - 9am daily),"Cron trigger, AdminWorkflow creation",Incomplete shifts not flagged,Check AdminWorkflows for verification tasks
Automation Pipeline,auto-002,No-show detection,Alert if no clock-in 15 mins after shift start,functions/noShowDetectionEngine,Admin Workflows page,"Shift monitoring, Workflow creation",No-shows not detected - revenue loss,Simulate no-show and verify workflow created
Automation Pipeline,auto-003,Compliance expiry reminders,Send reminders 30d/14d/7d before expiry,functions/complianceMonitor,N/A (Cron),"Compliance entity, Multi-channel notifications",Staff work with expired docs - liability,Check compliance.reminder_30d_sent flag
Automation Pipeline,auto-004,Notification batching,Queue notifications for 5-min batching,components/notifications/NotificationService,N/A (Background),"NotificationQueue entity, Scheduled send",Email spam risk if not batched,Verify scheduled_send_at = created_at + 5 mins
Automation Pipeline,auto-005,Timesheet batch processor,Auto-approve all pending timesheets,functions/scheduledTimesheetProcessor,Timesheets page → Auto-Approve All,"Auto-approval engine, Bulk updates",Admin bottleneck on timesheet approval,Run batch and verify approval count
Automation Pipeline,auto-006,Staff daily digest,Send upcoming shifts + earnings summary,functions/staffDailyDigestEngine,N/A (Cron - 8pm daily),"Email generation, Data aggregation",Staff not informed of schedule,Check staff email for daily digest
Financial Integrity Pipeline,fin-001,Financial lock enforcement,Prevent rate/hour changes after timesheet approval,entities/Timesheet (updateMutation),Timesheets page,"financial_locked flag, Validation checks",Data tampering risk - legal liability,Try editing locked timesheet → verify blocked
Financial Integrity Pipeline,fin-002,Immutable invoice snapshot,Invoice data frozen when sent to client,entities/Invoice (immutable_sent_snapshot),Invoices page,"JSON snapshot, Send validation",Invoice disputes - fraud risk,Send invoice → verify snapshot created
Financial Integrity Pipeline,fin-003,Change log creation,"Log all critical changes (rates, cancellations)",entities/ChangeLog,CFO Dashboard,"Audit triggers, Log creation",No audit trail - compliance failure,Make critical change → verify log created
Financial Integrity Pipeline,fin-004,Invoice amendment workflow,Track invoice changes with version control,entities/InvoiceAmendment,Invoices page (amendment flow),"Amendment tracking, Email trail",Untracked invoice changes - disputes,Amend invoice → verify new version created
Financial Integrity Pipeline,fin-005,Rate card validation,Verify correct rate applied (day/night/weekend),components/shifts/ShiftRateDisplay,Shifts page,"Client contract_terms, Rate calculation",Incorrect billing - revenue loss,Create shift → verify rate matches contract
Financial Integrity Pipeline,fin-006,Work location validation,Ensure location specified if client requires it,entities/Client (require_location_specification),Shifts page,"Client settings, Validation rules",Invoice disputes - payment delays,Create shift without location → verify warning
Communication Pipeline,comm-001,Send email (Resend),Test email delivery via Resend API,functions/sendEmail,Email Notification Tester,"RESEND_API_KEY, Resend integration",No email notifications - ops failure,Send test email → verify delivery
Communication Pipeline,comm-002,Send SMS (Twilio),Test SMS delivery via Twilio,functions/sendSMS,Test Shift Reminders page,"TWILIO_ACCOUNT_SID, Twilio API",No SMS reminders - no-shows increase,Send test SMS → verify receipt
Communication Pipeline,comm-003,Send WhatsApp (Twilio),Test WhatsApp delivery,functions/sendWhatsApp,Test Shift Reminders page,"TWILIO_WHATSAPP_NUMBER, Twilio API",WhatsApp reminders fail - user preference,Send test WhatsApp → verify receipt
Communication Pipeline,comm-004,WhatsApp bot response,Test WhatsApp assistant replies,functions/whatsappMasterRouter,N/A (WhatsApp channel),"Webhook, AI routing",Staff cannot use WhatsApp assistant,Send WhatsApp message → verify response
Communication Pipeline,comm-005,Email batching,Notifications batched every 5 minutes,components/notifications/NotificationService,N/A (Background),"NotificationQueue, Scheduled processing",Email spam if not batched,Trigger 3 notifications → verify single email
Communication Pipeline,comm-006,Multi-channel fallback,Try email → SMS → WhatsApp if primary fails,components/notifications/NotificationService,N/A (Background),"Channel prioritization, Error handling",Staff miss notifications,Simulate email failure → verify SMS sent
Data & Analytics Pipeline,data-001,Shift journey log,Complete audit trail logged for each shift,entities/Shift (shift_journey_log),Shifts page (JSON field),"JSON updates, State tracking",No dispute resolution evidence,Complete shift → verify journey log populated
Data & Analytics Pipeline,data-002,Performance metrics,"KPIs calculated correctly (fill rate, margin)",pages/PerformanceAnalytics,Performance Analytics page,"Data aggregation, SQL queries",Inaccurate business insights,Compare calculated vs manual metrics
Data & Analytics Pipeline,data-003,Timesheet analytics,Discrepancy reports accurate,pages/TimesheetAnalytics,Timesheet Analytics page,"Data filtering, Chart rendering",Cannot identify problem timesheets,Verify discrepancy count matches actual
Data & Analytics Pipeline,data-004,CSV export,Export shifts/timesheets to CSV,pages/Shifts (exportToCSV),Shifts page → Export CSV,"Data serialization, Download generation",Cannot export for external analysis,Export and verify all columns present
Data & Analytics Pipeline,data-005,CFO dashboard,Financial integrity metrics displayed,pages/CFODashboard,CFO Dashboard page,"ChangeLog queries, Lock status",Cannot monitor financial security,Verify locked timesheet count accurate
External Integrations,int-001,OpenAI API (InvokeLLM),"AI responses working (email parsing, OCR)",base44.integrations.Core.InvokeLLM,N/A (Background),"OPENAI_API_KEY, API quota","No email parsing, no OCR - manual entry",Test InvokeLLM call → verify response
External Integrations,int-002,Resend API (Email),Email sending operational,functions/sendEmail,Email Notification Tester,"RESEND_API_KEY, Domain verification",No emails sent - communication breakdown,Send test email → check Resend dashboard
External Integrations,int-003,Twilio API (SMS/WhatsApp),SMS and WhatsApp sending operational,"functions/sendSMS, sendWhatsApp",Test Shift Reminders page,"TWILIO_ACCOUNT_SID, Phone number active",No SMS/WhatsApp - reminders fail,Send test → verify Twilio logs
External Integrations,int-004,Base44 file storage,File upload/download working,base44.integrations.Core.UploadFile,Timesheets page → Upload Doc,Base44 storage service,Cannot upload timesheets - ops failure,Upload file → verify file_url returned
External Integrations,int-005,Resend webhook (Inbound email),Webhook receives care home emails,functions/careHomeInboundEmail,N/A (Webhook endpoint),"Resend webhook config, Domain routing",No shift requests received,Send email to instayfs.co.uk → verify received
